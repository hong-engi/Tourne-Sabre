{"ast":null,"code":"import { Player, Item } from './object.js';\nimport { map } from './map.js';\nvar ateItemid = null;\nvar flag = 0;\nvar delflag = true;\n\nfunction frameUpdate(player, pKeys) {\n  if (pKeys['w']) player.addSpeed(0, -1);\n  if (pKeys['s']) player.addSpeed(0, 1);\n  if (pKeys['a']) player.addSpeed(-1, 0);\n  if (pKeys['d']) player.addSpeed(1, 0);\n  player.move();\n  player.sw_rot(6 * (Math.PI / 180));\n  map.playerUpdate(player);\n  map.getItems();\n  map.getPlayers();\n\n  for (let i = 0; i < map.itemList.length; i++) {\n    let item = Item.schemaItem(map.itemList[i]);\n\n    if (player.trytoeat(item) && ateItemid != item.id) {\n      ateItemid = item.id;\n      item.eaten(player);\n      map.ate(item);\n    }\n  }\n\n  for (let i = 0; i < map.playerList.length; i++) {\n    let player2 = Player.schemaPlayer(map.playerList[i]);\n\n    if (player.trytohit(player2)) {\n      map.damage(player2, 100);\n\n      if (player2.dead()) {\n        map.kill(player2);\n        player.xpup(50);\n        console.log('dead', player2.id);\n      }\n    }\n  }\n\n  if (pKeys['.'] && flag) {\n    var p = new Player('Jane Doe', 100, 100);\n    map.addPlayer(p);\n  }\n\n  if (pKeys[',']) {\n    map.addItem();\n    console.log('addItem');\n  }\n\n  if (pKeys['q'] && delflag) {\n    map.deleteAll();\n    console.log('deleteall');\n    delflag = false;\n  }\n}\n\nexport default frameUpdate;","map":{"version":3,"sources":["/Users/hong-eungi/git/tourne-sabre/frontend/src/frameUpdater.js"],"names":["Player","Item","map","ateItemid","flag","delflag","frameUpdate","player","pKeys","addSpeed","move","sw_rot","Math","PI","playerUpdate","getItems","getPlayers","i","itemList","length","item","schemaItem","trytoeat","id","eaten","ate","playerList","player2","schemaPlayer","trytohit","damage","dead","kill","xpup","console","log","p","addPlayer","addItem","deleteAll"],"mappings":"AAAA,SAAQA,MAAR,EAAeC,IAAf,QAA0B,aAA1B;AACA,SAAQC,GAAR,QAAkB,UAAlB;AACA,IAAIC,SAAS,GAAG,IAAhB;AACA,IAAIC,IAAI,GAAG,CAAX;AACA,IAAIC,OAAO,GAAG,IAAd;;AACA,SAASC,WAAT,CAAqBC,MAArB,EAA4BC,KAA5B,EAAkC;AAChC,MAAGA,KAAK,CAAC,GAAD,CAAR,EAAcD,MAAM,CAACE,QAAP,CAAgB,CAAhB,EAAkB,CAAC,CAAnB;AACd,MAAGD,KAAK,CAAC,GAAD,CAAR,EAAcD,MAAM,CAACE,QAAP,CAAgB,CAAhB,EAAkB,CAAlB;AACd,MAAGD,KAAK,CAAC,GAAD,CAAR,EAAcD,MAAM,CAACE,QAAP,CAAgB,CAAC,CAAjB,EAAmB,CAAnB;AACd,MAAGD,KAAK,CAAC,GAAD,CAAR,EAAcD,MAAM,CAACE,QAAP,CAAgB,CAAhB,EAAkB,CAAlB;AACdF,EAAAA,MAAM,CAACG,IAAP;AACAH,EAAAA,MAAM,CAACI,MAAP,CAAc,KAAGC,IAAI,CAACC,EAAL,GAAQ,GAAX,CAAd;AACAX,EAAAA,GAAG,CAACY,YAAJ,CAAiBP,MAAjB;AACAL,EAAAA,GAAG,CAACa,QAAJ;AACAb,EAAAA,GAAG,CAACc,UAAJ;;AAEA,OAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACf,GAAG,CAACgB,QAAJ,CAAaC,MAA3B,EAAkCF,CAAC,EAAnC,EAAsC;AACpC,QAAIG,IAAI,GAAGnB,IAAI,CAACoB,UAAL,CAAgBnB,GAAG,CAACgB,QAAJ,CAAaD,CAAb,CAAhB,CAAX;;AACA,QAAGV,MAAM,CAACe,QAAP,CAAgBF,IAAhB,KAAuBjB,SAAS,IAAIiB,IAAI,CAACG,EAA5C,EAA+C;AAC7CpB,MAAAA,SAAS,GAAGiB,IAAI,CAACG,EAAjB;AACAH,MAAAA,IAAI,CAACI,KAAL,CAAWjB,MAAX;AACAL,MAAAA,GAAG,CAACuB,GAAJ,CAAQL,IAAR;AACD;AACF;;AAED,OAAI,IAAIH,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACf,GAAG,CAACwB,UAAJ,CAAeP,MAA7B,EAAoCF,CAAC,EAArC,EAAwC;AACtC,QAAIU,OAAO,GAAG3B,MAAM,CAAC4B,YAAP,CAAoB1B,GAAG,CAACwB,UAAJ,CAAeT,CAAf,CAApB,CAAd;;AACA,QAAGV,MAAM,CAACsB,QAAP,CAAgBF,OAAhB,CAAH,EAA4B;AAC1BzB,MAAAA,GAAG,CAAC4B,MAAJ,CAAWH,OAAX,EAAmB,GAAnB;;AACA,UAAGA,OAAO,CAACI,IAAR,EAAH,EAAkB;AAChB7B,QAAAA,GAAG,CAAC8B,IAAJ,CAASL,OAAT;AACApB,QAAAA,MAAM,CAAC0B,IAAP,CAAY,EAAZ;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAmBR,OAAO,CAACJ,EAA3B;AACD;AACF;AACF;;AAED,MAAGf,KAAK,CAAC,GAAD,CAAL,IAAcJ,IAAjB,EAAsB;AACpB,QAAIgC,CAAC,GAAG,IAAIpC,MAAJ,CAAW,UAAX,EAAsB,GAAtB,EAA0B,GAA1B,CAAR;AACAE,IAAAA,GAAG,CAACmC,SAAJ,CAAcD,CAAd;AACD;;AACD,MAAG5B,KAAK,CAAC,GAAD,CAAR,EAAc;AACZN,IAAAA,GAAG,CAACoC,OAAJ;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACD;;AACD,MAAG3B,KAAK,CAAC,GAAD,CAAL,IAAcH,OAAjB,EAAyB;AACvBH,IAAAA,GAAG,CAACqC,SAAJ;AACAL,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACA9B,IAAAA,OAAO,GAAG,KAAV;AACD;AACF;;AACD,eAAeC,WAAf","sourcesContent":["import {Player,Item} from './object.js'\nimport {map} from './map.js'\nvar ateItemid = null\nvar flag = 0\nvar delflag = true\nfunction frameUpdate(player,pKeys){\n  if(pKeys['w'])player.addSpeed(0,-1);\n  if(pKeys['s'])player.addSpeed(0,1);\n  if(pKeys['a'])player.addSpeed(-1,0);\n  if(pKeys['d'])player.addSpeed(1,0);\n  player.move();\n  player.sw_rot(6*(Math.PI/180))\n  map.playerUpdate(player)\n  map.getItems()\n  map.getPlayers()\n\n  for(let i=0;i<map.itemList.length;i++){\n    let item = Item.schemaItem(map.itemList[i])\n    if(player.trytoeat(item)&&ateItemid != item.id){\n      ateItemid = item.id\n      item.eaten(player)\n      map.ate(item)\n    }\n  }\n\n  for(let i=0;i<map.playerList.length;i++){\n    let player2 = Player.schemaPlayer(map.playerList[i])\n    if(player.trytohit(player2)){\n      map.damage(player2,100)\n      if(player2.dead()){\n        map.kill(player2)\n        player.xpup(50)\n        console.log('dead',player2.id)\n      }\n    }\n  }\n\n  if(pKeys['.'] && flag){\n    var p = new Player('Jane Doe',100,100)\n    map.addPlayer(p)\n  }\n  if(pKeys[',']){\n    map.addItem()\n    console.log('addItem')\n  }\n  if(pKeys['q'] && delflag){\n    map.deleteAll()\n    console.log('deleteall')\n    delflag = false\n  }\n}\nexport default frameUpdate"]},"metadata":{},"sourceType":"module"}